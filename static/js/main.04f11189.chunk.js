(this.webpackJsonpfocusify=this.webpackJsonpfocusify||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},65:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n.n(c),l=n(33),i=n.n(l),o=n(13),s=(n(42),n(4)),u=n(16),f=n(5),p=a.a.createContext("token"),j="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("8f7580eb52f24096a8c0be232f9dd439","&redirect_uri=").concat("https://jagodarybacka.github.io/focusify-app/","&scope=").concat(["user-read-currently-playing","user-read-playback-state","user-modify-playback-state","playlist-read-private","playlist-read-collaborative"].join("%20"),"&response_type=token&show_dialog=true"),b=function(){var e=localStorage.getItem("spotifyToken");if(e)return e;var t=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}return e}),{}).access_token;return t&&localStorage.setItem("spotifyToken",t),window.location.hash="",t},d=function(){localStorage.clear(),window.location.replace("/")},O=n(34),h=n.n(O);n(43);function y(e){var t=e.onClick,n=e.isDisabled,c=e.isHidden,a=e.isAccent,l=e.children,i=Object(u.b)((function(){return{scale:1}})),o=Object(s.a)(i,2),f=o[0].scale,p=o[1],j=h()({Button:!0,"is-disabled":n,"is-hidden":c,"is-accent":a});return Object(r.jsx)(u.a.button,{className:j,onClick:t,disabled:n,onMouseEnter:function(){return p({scale:1.05})},onMouseLeave:function(){return p({scale:1})},style:{transform:f.interpolate((function(e){return"scale(".concat(e,")")}))},children:l})}y.defaultProps={isDisabled:!1,isHidden:!1,isAccent:!1};n(44);function v(e){var t=e.label;return Object(r.jsx)("div",{className:"Header",children:t})}var m=n(3),x=n(7),g=n.n(x),w=n(14),k=n(35),E=n.n(k),P="https://api.spotify.com/v1/me",_=function(e){return{headers:{Authorization:"Bearer ".concat(e)}}};function S(e){return N.apply(this,arguments)}function N(){return N=Object(w.a)(g.a.mark((function e(t){var n,r,c=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:function(){},r=c.length>2&&void 0!==c[2]?c[2]:function(){},e.next=4,E()(t).then(n).catch((function(e){var t=e.response;return r(t.data.error)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function I(){return(I=Object(w.a)(g.a.mark((function e(t,n,r){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.token,S(Object(m.a)({method:"get",url:"".concat(P,"/playlists")},_(c)),(function(e){return n(e.data.items)}),r);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(w.a)(g.a.mark((function e(t,n,r){var c,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.token,a=t.context,S(Object(m.a)(Object(m.a)({method:"put",url:"".concat(P,"/player/play")},_(c)),a?{data:{context_uri:a}}:{}),n,r);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,n){return M.apply(this,arguments)}function M(){return(M=Object(w.a)(g.a.mark((function e(t,n,r){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B({token:c=t.token},(function(e){var t=e.data;(null===t||void 0===t?void 0:t.is_playing)&&S(Object(m.a)({method:"put",url:"".concat(P,"/player/pause")},_(c)),n,r)}),r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(w.a)(g.a.mark((function e(t,n,r){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.token,S(Object(m.a)({method:"post",url:"".concat(P,"/player/next")},_(c)),n,r);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(w.a)(g.a.mark((function e(t,n,r){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.token,S(Object(m.a)({method:"post",url:"".concat(P,"/player/previous")},_(c)),n,r);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,n){return L.apply(this,arguments)}function L(){return(L=Object(w.a)(g.a.mark((function e(t,n,r){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.token,S(Object(m.a)({method:"get",url:"".concat(P,"/player")},_(c)),n,r);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(w.a)(g.a.mark((function e(t,n,r){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.token,S(Object(m.a)({method:"get",url:"".concat(P,"/player/devices")},_(c)),(function(e){return n(e.data.devices)}),r);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){var n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=e}),[e]),Object(c.useEffect)((function(){if(null!==t){var e=setInterval((function(){return n.current()}),t);return function(){return clearInterval(e)}}}),[t])}var F=1e3,W=60,D=401,A=function(){};n(65);function K(){var e=Object(c.useContext)(p),t=Object(c.useState)(!1),n=Object(s.a)(t,2),a=n[0],l=n[1],i=Object(c.useState)(!1),u=Object(s.a)(i,2),f=u[0],b=u[1],O=function(e){e.status===D&&b(!0),l(!1)},h=function(e){var t=e.some((function(e){return e.is_active}));l(t)};return V((function(){return e&&function(e,t,n){return H.apply(this,arguments)}({token:e},h,O)}),F),Object(r.jsxs)("div",{className:"Intro",children:[Object(r.jsx)(v,{label:"Focusify"}),Object(r.jsxs)("p",{className:"Intro__description",children:["Welcome to ",Object(r.jsx)("span",{className:"is-app-name",children:"Focusify"}),", the place where concentration meets music."]}),Object(r.jsx)("p",{className:"Intro__description",children:"Pick your Spotify playlists - one to focus on work and one to relax during rest. They will switch when the time for each part of the session will pass. Use the music to manage your time and get things done!"}),Object(r.jsx)("div",{className:"Intro__setup",children:e&&!f?Object(r.jsxs)(r.Fragment,{children:[a?Object(r.jsx)("div",{className:"Intro__info",children:"Your Spotify app is connected."}):Object(r.jsxs)("div",{className:"Intro__info has-error",children:["Your Spotify app is disconnected. ",Object(r.jsx)("br",{})," Open Spotify and try to play any track."]}),Object(r.jsx)(y,{isDisabled:!a,children:Object(r.jsx)(o.b,{to:"/setup",children:"Setup session"})})]}):Object(r.jsx)(y,{onClick:function(){return d()},isAccent:!0,children:Object(r.jsx)("a",{href:j,children:"Login to spotify"})})})]})}n(71);function U(e){var t=e.error;return Object(r.jsxs)("div",{className:"Error",children:[Object(r.jsx)("h1",{className:"Error__header",children:"Something went wrong"}),Object(r.jsx)("p",{className:"Error__description",children:t.message}),t.status===D&&Object(r.jsx)(y,{onClick:function(){return d()},children:"Log in again"})]})}n(72);function Y(e){var t=e.render,n=e.onClick,c={width:e.width||"1rem",height:e.height||"1rem"};return Object(r.jsx)("div",{style:c,className:"Icon",onClick:n,children:t()})}function J(){return J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(this,arguments)}function G(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var q=c.createElement("path",{fill:"none",d:"M-1-1h26v26H-1z"}),Q=c.createElement("g",null,c.createElement("path",{fill:"none",d:"M.081.243h48v48h-48v-48z"}),c.createElement("path",{stroke:"null",d:"M23.668 10.49H5.918l8.146-8.427L12-.073.332 12 12 24.073l2.064-2.136-8.146-8.428h17.75v-3.018z"}));function X(e,t){var n=e.title,r=e.titleId,a=G(e,["title","titleId"]);return c.createElement("svg",J({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?c.createElement("title",{id:r},n):null,q,Q)}var Z=c.forwardRef(X);n.p;function $(){return $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}function ee(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var te=c.createElement("path",{fill:"none",d:"M-1-1h26v26H-1z"}),ne=c.createElement("g",null,c.createElement("g",{stroke:"null"},c.createElement("path",{d:"M23.09 21.983H.91c-.466 0-.831.382-.831.825s.385.825.83.825H23.11c.467 0 .832-.382.832-.825s-.386-.825-.852-.825zM.079 14.677l-.02 3.925c0 .221.08.442.243.603a.815.815 0 00.588.242l3.933-.02c.223 0 .426-.08.588-.242L18.995 5.7a.846.846 0 000-1.187L15.102.608a.861.861 0 00-1.196 0l-2.717 2.717L.322 14.093a.893.893 0 00-.243.584zM14.514 2.379l2.737 2.717-1.54 1.53-2.738-2.717 1.541-1.53zM1.761 15.04l10.016-9.943 2.737 2.718-10.016 9.922-2.757.02.02-2.717z"})));function re(e,t){var n=e.title,r=e.titleId,a=ee(e,["title","titleId"]);return c.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?c.createElement("title",{id:r},n):null,te,ne)}var ce=c.forwardRef(re);n.p;function ae(){return ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ae.apply(this,arguments)}function le(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var ie=c.createElement("path",{fill:"none",d:"M-1-1h802v602H-1z"}),oe=c.createElement("g",null,c.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"null"},c.createElement("path",{d:"M-11.72-11.129l47.492.054-.052 46.204-47.492-.054z"}),c.createElement("path",{fill:"currentColor",d:"M.114 23.537l16.833-11.531L.14.436.114 23.537zM4.089 7.871l5.992 4.127L4.08 16.11l.01-8.24zM19.93.458l3.957.005-.026 23.101-3.958-.004L19.93.458z"})));function se(e,t){var n=e.title,r=e.titleId,a=le(e,["title","titleId"]);return c.createElement("svg",ae({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?c.createElement("title",{id:r},n):null,ie,oe)}var ue=c.forwardRef(se);n.p;function fe(){return fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe.apply(this,arguments)}function pe(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var je=c.createElement("path",{fill:"none",d:"M-1-1h26v26H-1z"}),be=c.createElement("g",null,c.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"null"},c.createElement("path",{d:"M-11.37-8.519h46.74v41.038h-46.74z"}),c.createElement("path",{fill:"currentColor",d:"M.315 23.97h7.79V.03H.315v23.94zM15.895.03v23.94h7.79V.03h-7.79z"})));function de(e,t){var n=e.title,r=e.titleId,a=pe(e,["title","titleId"]);return c.createElement("svg",fe({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?c.createElement("title",{id:r},n):null,je,be)}var Oe=c.forwardRef(de);n.p;function he(){return he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},he.apply(this,arguments)}function ye(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var ve=c.createElement("path",{fill:"none",d:"M-1-1h26v26H-1z"}),me=c.createElement("g",null,c.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"null"},c.createElement("path",{d:"M-13.765-8.46l46.42-.035.032 40.954-46.42.036z"}),c.createElement("path",{fill:"currentColor",d:"M5.588 6.27l10.198 5.725-10.189 5.742-.009-11.468zM1.715.06l.018 23.891L23 11.99 1.715.06z"})));function xe(e,t){var n=e.title,r=e.titleId,a=ye(e,["title","titleId"]);return c.createElement("svg",he({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?c.createElement("title",{id:r},n):null,ve,me)}var ge=c.forwardRef(xe);n.p;function we(){return we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}function ke(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var Ee=c.createElement("path",{fill:"none",d:"M-1-1h3.791v3.791H-1z"}),Pe=c.createElement("g",null,c.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"null"},c.createElement("path",{d:"M-11.969-11.902h48.011v47.81h-48.011z"}),c.createElement("path",{fill:"currentColor",d:"M.034.05h4v23.905h-4V.05zm7.001 11.953L24.04 23.955V.05L7.035 12.003zm13.003 4.263l-6.061-4.263 6.061-4.263v8.526z"})));function _e(e,t){var n=e.title,r=e.titleId,a=ke(e,["title","titleId"]);return c.createElement("svg",we({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?c.createElement("title",{id:r},n):null,Ee,Pe)}var Se=c.forwardRef(_e);n.p;n.p;n.p,n(73);function Ne(e){var t=e.handlePlay,n=e.handlePause,a=e.handleError,l=e.error,i=Object(c.useContext)(p),u=Object(c.useState)(null),f=Object(s.a)(u,2),j=f[0],b=f[1],d=Object(c.useState)(!1),O=Object(s.a)(d,2),h=O[0],v=O[1];V(Object(c.useCallback)((function(){B({token:i},(function(e){var t=e.data.item;t&&(null===t||void 0===t?void 0:t.id)!==(null===j||void 0===j?void 0:j.id)&&b(t)}),A,a)}),[i,j,a]),h?F:null),Object(c.useEffect)((function(){return l&&v(!1)}),[l]);var m=Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(y,{onClick:function(){!function(e,t,n){T.apply(this,arguments)}({token:i})},children:Object(r.jsx)(Y,{render:function(){return Object(r.jsx)(Se,{})}})}),Object(r.jsx)(y,{onClick:function(){v(!1),n()},children:Object(r.jsx)(Y,{render:function(){return Object(r.jsx)(Oe,{})}})}),Object(r.jsx)(y,{onClick:function(){!function(e,t,n){z.apply(this,arguments)}({token:i})},children:Object(r.jsx)(Y,{render:function(){return Object(r.jsx)(ue,{})}})})]}),x=null===j||void 0===j?void 0:j.album.images[0].url,g=null===j||void 0===j?void 0:j.artists.map((function(e){return e.name})).join(", "),w="".concat(g," - ").concat(null===j||void 0===j?void 0:j.name);return Object(r.jsxs)("div",{className:"Player",children:[Object(r.jsx)(y,{children:Object(r.jsx)(o.b,{to:"/",children:Object(r.jsx)(Y,{render:function(){return Object(r.jsx)(Z,{})}})})}),Object(r.jsx)("div",{className:"Player__cover",style:x&&{backgroundImage:"url(".concat(x,")")}}),h&&j?Object(r.jsx)("div",{className:"Player__label",title:w,children:w}):Object(r.jsx)("div",{className:"Player__label"}),Object(r.jsx)("div",{className:"Player__buttons",children:h?m:Object(r.jsx)(y,{onClick:function(){v(!0),t()},children:Object(r.jsx)(Y,{render:function(){return Object(r.jsx)(ge,{})}})})})]})}var Ie={duration:null,currentIndex:0,playlist:null,isPlaying:null,timeRemaining:null,error:null};function Ce(e,t){var n=t.type,r=t.playlist,c=t.isPlaying,a=t.error;switch(n){case"setPlaylist":return Object(m.a)(Object(m.a)({},e),{},{playlist:r,duration:r.time*W*F,timeRemaining:r.time*W});case"toggleSession":return Object(m.a)(Object(m.a)({},e),{},{currentIndex:e.currentIndex?0:1});case"decreaseTime":return Object(m.a)(Object(m.a)({},e),{},{timeRemaining:e.timeRemaining-1});case"togglePlay":return Object(m.a)(Object(m.a)({},e),{},{error:null,isPlaying:c});case"error":return Object(m.a)(Object(m.a)({},e),{},{isPlaying:null,error:a});default:throw new Error("Unknown action: ".concat(n))}}n(74);function Re(e){var t,n=e.playlists,a=e.handleReset,l=Object(c.useContext)(p),i=Object(c.useReducer)(Ce,Ie),o=Object(s.a)(i,2),u=o[0],f=o[1],j=u.isPlaying,b=u.playlist,d=u.currentIndex,O=u.duration,h=u.timeRemaining,y=u.error;return Object(c.useEffect)((function(){if(j){var e=n[d];!function(e,t,n){C.apply(this,arguments)}({token:l,context:e.playlist.uri},A,(function(e){return f({type:"error",error:e})})),f({type:"setPlaylist",playlist:e})}else null!==j&&R({token:l},A,(function(e){return f({type:"error",error:e})}))}),[n,l,j,d]),V((function(){return f({type:"toggleSession"})}),j?O:null),V((function(){return f({type:"decreaseTime"})}),j?F:null),Object(c.useEffect)((function(){return function(){return R({token:l})}}),[l]),Object(r.jsxs)("div",{className:"TimerPlayer",children:[Object(r.jsx)(v,{label:(null===b||void 0===b?void 0:b.label)||"Session"}),Object(r.jsxs)("div",{className:"TimerPlayer__wrapper",children:[Object(r.jsx)(Ne,{error:y,handleError:function(e){return f({type:"error",error:e})},handlePlay:function(){return f({type:"togglePlay",isPlaying:!0})},handlePause:function(){return f({type:"togglePlay",isPlaying:!1})},handleReset:a}),j&&b&&Object(r.jsxs)("div",{className:"TimerPlayer__time",children:[(t=h,"".concat(Math.floor(t/60),":").concat("0".concat(Math.floor(t%60)).slice(-2))),Object(r.jsxs)("div",{className:"TimerPlayer__time-description",children:["to the end of the ",b.label," session"]})]}),y&&Object(r.jsx)(U,{error:y})]})]})}function Me(e){var t=e.playlists,n=e.handleReset;return Object(r.jsx)(Re,{playlists:t,handleReset:n})}n(75);function ze(e){var t=e.playlist,n=e.onClick,c=t.name,a=t.images[0].url;return Object(r.jsx)("li",{className:"Playlist",style:{backgroundImage:"url(".concat(a,")")},title:c,onClick:function(){return n(t)}})}n(76);function Te(e){var t=e.onClick,n=Object(c.useContext)(p),a=Object(c.useState)(null),l=Object(s.a)(a,2),i=l[0],o=l[1],u=Object(c.useState)(null),f=Object(s.a)(u,2),j=f[0],b=f[1];if(Object(c.useEffect)((function(){return function(e,t,n){return I.apply(this,arguments)}({token:n},o,b)}),[n]),j)return Object(r.jsx)(U,{error:j});if(i&&!i.length){return Object(r.jsx)(U,{error:{message:"Your Spotify account has no playlists saved. Go to Spotify application and save some playlists."}})}return i&&Object(r.jsx)("ul",{className:"Playlists",children:i.map((function(e){return Object(r.jsx)(ze,{playlist:e,onClick:t},e.id)}))})}n(77);function Be(e){var t=e.label,n=e.content,c=e.onClick;return Object(r.jsxs)("div",{className:"EditBox",children:[Object(r.jsx)("span",{className:"EditBox__label",children:t}),Object(r.jsxs)("div",{className:"EditBox__content",children:[Object(r.jsx)("span",{className:"EditBox__content-text",title:n,children:n}),Object(r.jsx)(Y,{onClick:c,render:function(){return Object(r.jsx)(ce,{})}})]})]})}function Le(e,t,n){return!!e&&e<=n&&e>=t}n(78);function He(e){var t=e.label,n=e.suffix,a=e.placeholder,l=e.value,i=e.setValue,o=e.min,u=e.max,f=Object(c.useState)(!1),p=Object(s.a)(f,2),j=p[0],b=p[1];return Object(c.useEffect)((function(){b(Le(l,o,u))}),[o,u,l]),Object(r.jsxs)("div",{className:"InputNumber ".concat(j?"":"has-error"),children:[Object(r.jsx)("span",{className:"InputNumber__label",children:t}),Object(r.jsx)("input",{type:"text",className:"InputNumber__input",placeholder:a,onChange:function(e){return i(function(e){var t=e&&parseInt(e.split(".").join(","));return Number.isNaN(t)?"":t}(e.target.value))},value:l}),n&&Object(r.jsx)("span",{className:"InputNumber__suffix",children:n})]})}n(79);function Ve(e){var t=e.playlist,n=e.syncPlaylist,a=e.label,l=e.time,i=e.setTime,o=Object(c.useState)(!1),u=Object(s.a)(o,2),f=u[0],p=u[1],j=t&&t.images[0].url;return Object(c.useEffect)((function(){return function(){return p(!1)}}),[a]),Object(r.jsxs)("div",{className:"PlaylistsSelector",style:j&&{backgroundImage:"url(".concat(j,")")},children:[!f&&Object(r.jsxs)("div",{className:"PlaylistsSelector__form",children:[Object(r.jsx)(Be,{label:"Playlist",content:(null===t||void 0===t?void 0:t.name)||"No playlist selected. Pick one...",onClick:function(){return p(!0)}}),Object(r.jsx)(He,{label:"Duration",suffix:"min",value:l,setValue:i,max:120,min:1})]}),f&&Object(r.jsx)(Te,{onClick:function(e){n(e),p(!1)}})]})}var Fe,We=n(11),De=1,Ae=120,Ke={WORK:"work",REST:"rest"};function Ue(e){var t=e.work,n=e.rest;return!!(t.playlist&&n.playlist&&Le(t.time,De,Ae)&&Le(n.time,De,Ae))}var Ye=(Fe={isValid:!1,currentSetup:Ke.WORK},Object(We.a)(Fe,Ke.WORK,{label:"Work",playlist:null,time:45}),Object(We.a)(Fe,Ke.REST,{label:"Rest",playlist:null,time:15}),Fe);function Je(e,t){var n=e.currentSetup;switch(t.type){case"validate":return Object(m.a)(Object(m.a)({},e),{},{isValid:Ue(e)});case"back":return Object(m.a)(Object(m.a)({},e),{},{currentSetup:Ke.WORK});case"next":return Object(m.a)(Object(m.a)({},e),{},{currentSetup:Ke.REST});case"setPlaylist":return Object(m.a)(Object(m.a)({},e),{},Object(We.a)({},n,Object(m.a)(Object(m.a)({},e[n]),{},{playlist:t.playlist})));case"setTime":return Object(m.a)(Object(m.a)({},e),{},Object(We.a)({},n,Object(m.a)(Object(m.a)({},e[n]),{},{time:t.time})));case"reset":return Object(m.a)({},Ye);default:throw new Error("Unknown action: ".concat(t.type))}}n(80);function Ge(e){var t=e.setPlaylists,n=Object(c.useReducer)(Je,Ye),a=Object(s.a)(n,2),l=a[0],i=a[1],u=l.currentSetup,f=l.isValid,p=l.work,j=l.rest,b=l[u],d=b.label,O=b.playlist,h=b.time;Object(c.useEffect)((function(){i({type:"validate"})}),[O,h]),Object(c.useEffect)((function(){t([p,j])}),[t,p,j]);var m=u===Ke.WORK,x=m?"Next":Object(r.jsx)(o.b,{to:"/player",children:"Start session"});return Object(r.jsxs)("div",{className:"Setup",children:[Object(r.jsx)(v,{label:d}),Object(r.jsx)(Ve,{label:d,playlist:O,time:h,syncPlaylist:function(e){return i({type:"setPlaylist",playlist:e})},setTime:function(e){return i({type:"setTime",time:e})}}),Object(r.jsxs)("div",{className:"Setup__buttons",children:[Object(r.jsx)(y,{onClick:function(){return i({type:"back"})},isHidden:m,children:"Back"}),Object(r.jsx)(y,{onClick:function(){return i({type:"next"})},isDisabled:!m&&!f,children:x})]})]})}n(81);var qe=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],l=Object(c.useState)([]),i=Object(s.a)(l,2),o=i[0],j=i[1],d=Object(f.f)(),O=Object(u.c)(d,(function(e){return e.pathname}),{from:{opacity:0,position:"absolute"},enter:{opacity:1},leave:{opacity:0}});return Object(c.useEffect)((function(){var e=b();e&&a(e)}),[]),O.map((function(e){var t=e.item,c=e.props,a=e.key;return Object(r.jsx)(u.a.div,{style:c,className:"App",children:Object(r.jsx)(p.Provider,{value:n,children:Object(r.jsxs)(f.c,{location:t,children:[Object(r.jsx)(f.a,{path:"/setup",children:Object(r.jsx)(Ge,{setPlaylists:j})}),Object(r.jsx)(f.a,{path:"/player",children:Object(r.jsx)(Me,{playlists:o})}),Object(r.jsx)(f.a,{exact:!0,path:"/",children:Object(r.jsx)(K,{})})]})})},a)}))},Qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,l=t.getTTFB;n(e),r(e),c(e),a(e),l(e)}))};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(o.a,{basename:"".concat("focusify-app","/"),children:Object(r.jsx)(qe,{})})}),document.getElementById("root")),Qe()}},[[82,1,2]]]);
//# sourceMappingURL=main.04f11189.chunk.js.map